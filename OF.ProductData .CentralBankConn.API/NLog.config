<?xml version="1.0" encoding="UTF-8"?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd" autoReload="true" throwExceptions="false" internalLogLevel="Error" internalLogFile="${Logedir}./nlog-internal.txt">
  <variable name="Logedir" value="D:\SwathiRekha\OpenFinance\Nlog\OF.ProductData.CentralBankConn.API\" />
  <targets>
    <target name="OF.DataSharing.CentralBankConn.API" xsi:type="File" layout="Timestamp: ${longdate} |${level:uppercase=true}| ${message}"
          fileName="${Logedir}/OF.DataSharing.CentralBankConn.API/OF.DataSharing.CentralBankConn.API.txt"
          archiveAboveSize="2000000"
          archiveFileName="${Logedir}/OF.DataSharing.CentralBankConn.API/Archives/OF.DataSharing.CentralBankConn.API.{#}.txt"
          archiveDateFormat="yyyy-MM-dd HH_mm_ss"
          archiveNumbering="Date"
          maxArchiveDays="1"
          concurrentWrites="true"
          keepFileOpen="true"
          openFileCacheTimeout="30" />
    <target name="Product" xsi:type="File" layout="Timestamp: ${longdate} |${level:uppercase=true}| ${message}"
			  fileName="${Logedir}/Product/Product.txt"
			  archiveAboveSize="2000000"
			  archiveFileName="${Logedir}/Product/Archives/Product.{#}.txt"
			  archiveDateFormat="yyyy-MM-dd HH_mm_ss"
			  archiveNumbering="Date"
			  maxArchiveDays="1"
			  concurrentWrites="true"
			  keepFileOpen="true"
			  openFileCacheTimeout="30" />
    <target name="ProductJson" xsi:type="File"
			  fileName="${Logedir}/ProductJson/ProductJson.json"
			  encoding="utf-8"
			  archiveEvery="Day"
			  maxArchiveFiles="7"
			  concurrentWrites="true"
			  keepFileOpen="false">

      <layout xsi:type="JsonLayout" includeAllProperties="true" renderEmptyObject="false">
        <attribute name="time" layout="${longdate}" />
        <attribute name="level" layout="${level:upperCase=true}" />
        <attribute name="logger" layout="${logger}" />
        <attribute name="message" layout="${message}" />
        <attribute name="stackTrace" layout="${exception:format=ToString}" />
      </layout>
    </target>
   
    <target name="Queue" xsi:type="File" layout="Timestamp: ${longdate} |${level:uppercase=true}| ${message}"
			  fileName="${Logedir}/Queue/Queue.txt"
			  archiveAboveSize="2000000"
			  archiveFileName="${Logedir}/Queue/Archives/Queue.{#}.txt"
			  archiveDateFormat="yyyy-MM-dd HH_mm_ss"
			  archiveNumbering="Date"
			  maxArchiveDays="1"
			  concurrentWrites="true"
			  keepFileOpen="true"
			  openFileCacheTimeout="30" />
    <target name="QueueJson" xsi:type="File"
			  fileName="${Logedir}/QueueJson/QueueJson.json"
			  encoding="utf-8"
			  archiveEvery="Day"
			  maxArchiveFiles="7"
			  concurrentWrites="true"
			  keepFileOpen="false">

      <layout xsi:type="JsonLayout" includeAllProperties="true" renderEmptyObject="false">
        <attribute name="time" layout="${longdate}" />
        <attribute name="level" layout="${level:upperCase=true}" />
        <attribute name="logger" layout="${logger}" />
        <attribute name="message" layout="${message}" />
        <attribute name="stackTrace" layout="${exception:format=ToString}" />
      </layout>
    </target>

   

  </targets>
  <rules>
    <logger name="OF.DataSharing.CentralBankConn.API.Logger" minlevel="Info" writeTo="OF.DataSharing.CentralBankConn.API" />
    <logger name="ProductLogger" minlevel="Info" writeTo="Product" />
    <logger name="ProductJsonLogger" minlevel="Info" writeTo="ProductJson" />
  </rules>
  <extensions>
    <add assembly="NLog.Web.AspNetCore" />
  </extensions>
</nlog>